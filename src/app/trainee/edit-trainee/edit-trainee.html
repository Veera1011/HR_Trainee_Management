<div class="edit-trainee-container">
  <h2>Edit Trainee</h2>
  <form [formGroup]="traineeForm" (ngSubmit)="updateTrainee()">
    
    <div class="form-group">
      <label for="employeeId">Employee</label>
      <select 
        id="employeeId"
        formControlName="employeeId"
        [class.invalid]="traineeForm.get('employeeId')?.invalid && traineeForm.get('employeeId')?.touched">
        <option value="">Select Employee</option>
        <option *ngFor="let emp of employees" [value]="emp.employeeId">
          {{ emp.employeeName }} ({{ emp.employeeId }})
        </option>
      </select>
      <span class="error" *ngIf="traineeForm.get('employeeId')?.invalid && traineeForm.get('employeeId')?.touched">
        Employee is required
      </span>
    </div>

    <div class="form-group">
      <label for="stack">Stack (Filter Trainings)</label>
      <select id="stack" (change)="onStackChange($event)">
        <option value="">All Stacks</option>
        <option value="MEAN">MEAN</option>
        <option value="SAP">SAP</option>
        <option value="CBP">CBP</option>
        <option value="Functional">Functional</option>
      </select>
    </div>

    <div class="form-group">
      <label for="trainingCode">Training</label>
      <select 
        id="trainingCode"
        formControlName="trainingCode"
        [class.invalid]="traineeForm.get('trainingCode')?.invalid && traineeForm.get('trainingCode')?.touched">
        <option value="">Select Training</option>
        <option *ngFor="let training of filteredTrainings" [value]="training.trainingCode">
          {{ training.trainingName }} ({{ training.stack }})
        </option>
      </select>
      <span class="error" *ngIf="traineeForm.get('trainingCode')?.invalid && traineeForm.get('trainingCode')?.touched">
        Training is required
      </span>
    </div>

    <div class="form-group">
      <label for="startDate">Start Date</label>
      <input 
        id="startDate"
        type="date"
        formControlName="startDate"
        [class.invalid]="traineeForm.get('startDate')?.invalid && traineeForm.get('startDate')?.touched">
      <span class="error" *ngIf="traineeForm.get('startDate')?.invalid && traineeForm.get('startDate')?.touched">
        Start date is required
      </span>
    </div>

    <div class="form-group">
      <label for="endDate">End Date (optional)</label>
      <input 
        id="endDate"
        type="date"
        formControlName="endDate">
    </div>

    <div class="form-group">
      <label for="status">Status</label>
      <select 
        id="status"
        formControlName="status"
        [class.invalid]="traineeForm.get('status')?.invalid && traineeForm.get('status')?.touched">
        <option value="">Select Status</option>
        <option value="Pending">Pending</option>
        <option value="Ongoing">Ongoing</option>
        <option value="Completed">Completed</option>
      </select>
      <span class="error" *ngIf="traineeForm.get('status')?.invalid && traineeForm.get('status')?.touched">
        Status is required
      </span>
    </div>

    <div class="form-group" *ngIf="traineeForm.get('status')?.value === 'Completed'">
      <label for="completionPercentage">Completion %</label>
      <input 
        id="completionPercentage"
        type="number"
        formControlName="completionPercentage"
        min="0"
        max="100">
    </div>

    <div class="form-group">
      <label for="remarks">Remarks (optional)</label>
      <textarea 
        id="remarks"
        formControlName="remarks"
        rows="3"></textarea>
    </div>

    <div class="button-group">
      <button type="submit" class="btn-primary" [disabled]="traineeForm.invalid">
        Update Trainee
      </button>
      <button type="button" class="btn-secondary" routerLink="/traineem/traineelist">
        Cancel
      </button>
    </div>
  </form>
</div>