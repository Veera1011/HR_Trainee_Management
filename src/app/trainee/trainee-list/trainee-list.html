<div class="trainee-table">
  <h2>Trainees List</h2>
  
  <div class="search">
    <div class="input-group">
      <input 
        #searchname 
        type="text" 
        name="name" 
        [(ngModel)]="name" 
        placeholder="Search by Employee Name" 
        (ngModelChange)="filter()">
    </div>

    <div class="input-group">
      <input 
        #but1 
        type="date" 
        name="sd" 
        [(ngModel)]="sd" 
        (ngModelChange)="filterbydate()">
      <span class="error" *ngIf="sdRequired">*Start date required</span>
    </div>

    <div class="input-group">
      <input 
        #but2 
        type="date" 
        name="ed" 
        [(ngModel)]="ed" 
        (ngModelChange)="filterbydate()">
      <span class="error" *ngIf="edRequired">*End date required</span>
    </div>

    <button type="button" (click)="clear()">Clear</button>
  </div>

  <table *ngIf="trainees.length !== 0">
    <thead>
      <tr>
        <th>Trainee ID</th>
        <th>Employee Name</th>
        <th>Training Name</th>
        <th>Stack</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Status</th>
        <th>Completion %</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let trainee of trainees">
        <td>{{ trainee.traineeId || 'N/A' }}</td>
        <td>{{ trainee.employeeId?.employeeName || 'N/A' }}</td>
        <td>{{ trainee.trainingCode?.trainingName || 'N/A' }}</td>
        <td>{{ trainee.trainingCode?.stack || 'N/A' }}</td>
        <td>{{ trainee.startDate | date:'shortDate' }}</td>
        <td>{{ trainee.endDate ? (trainee.endDate | date:'shortDate') : 'Not Set' }}</td>
        <td [appStatus]="trainee.status?.toLowerCase()">{{ trainee.status }}</td>
        <td>{{ trainee.completionPercentage || 0 }}%</td>
        <td>
          <button 
            type="button" 
            [routerLink]="['/traineem/edit', trainee.traineeId]">
            Edit
          </button>
          <button 
            type="button" 
            (click)="deleteTrainee(trainee.traineeId)">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <h1 *ngIf="trainees.length === 0">No Trainees Found</h1>
</div>